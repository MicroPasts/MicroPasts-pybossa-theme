import json
import requests


def api_request(request):
    '''Returns the data from a request (eg /groups)'''
    url = f'https://crowdsourced.fitz.ms/api/globalstats'
    req = requests.get(url)

    if not req.content:
        return None

    # We only want the data associated with the "response" key
    return json.loads(req.content)['response']

def get_stats(group_id):
    response = api_request()

    # Just return the messages (and none of the metadata)
    return response

if __name__ == '__main__':
    messages = get_messages_for_group(YOUR_GROUP_ID)
    print(messages[0])

{% macro render_stats -%}
  data = get_stats
  {{ data }}
{% endmacro %}
